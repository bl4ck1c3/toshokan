
<%= javascript_tag do %>
  window.userType = '<%= current_user.type %>'
<% end %>

<div id="util-links" class="util-links pull-right">
  <!-- Login -->
  <% if can? :login, User %>
    <%= link_to t('toshokan.header_links.login_cas'), select_auth_provider_path(:return_url => request.fullpath) %>
  <% end %>

  <% if current_user.authenticated? %>
    <!-- Username -->
    <%= t("toshokan.header_links.#{can?(:switch_back, User) ? 'acting_as' : 'logged_in_as'}") %> <%= link_to current_user, edit_user_registration_path %>
    <!-- Switch user -->
    <% if can? :switch, User %>
      |
      <%= link_to t('toshokan.header_links.switch_user'), switch_user_path, :id => 'switch_user' %>
      <div class="modal hide fade" id="switch_user_modal">
        <div class="modal-header">
          <button style="display:inherit" class="close" data-dismiss="modal" type="button">&times;</button>
          <h3><%= t 'toshokan.modals.switch_user.title' %></h3>
        </div>
        <div class="modal-body">
          <%= render '/users/sessions/switch_user_form' %>
        </div>
      </div>
    <% elsif can? :switch_back, User %>
      |
      <%= link_to t('toshokan.header_links.switch_back'), user_session_path, :method => :put, :id => 'switch_back' %>
    <% end %>
    <% if can? :update, User %>
      |
      <%= link_to t('toshokan.header_links.admin'), users_path %>
    <% end %>
  <% end %>
  <% if can? :view, :search_history %>
    |
    <%= link_to t('blacklight.header_links.search_history'), search_history_path %>
  <% end %>
  <% if can? :logout, User %>
    |
    <%= link_to t('toshokan.header_links.logout_cas'), destroy_user_session_path(:return_url => root_path) %>
  <% end %>
</div>
